sequence
(
  args
  (
    keyValue
    (
      "@Path"
      "https://elifetransfer.s3.us-east-2.amazonaws.com/dev/Driver_app/driver_app.html"
    )
    keyValue
    (
      "@email"
      "rioRideMore@qq.com"
    )
    keyValue
    (
      "@pwd"
      "riotest"
    )
  )
  assign
  (
    @_resumeInterval
    valueOf
    (
      100
    )
  )
  assign
  (
    @chr
    webBrowser
    (
      "Chrome"
    )
  )
  webBrowserPage
  (
    @chr
    @Path
  )
  webPageElementInput
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-email\"]"
    100
    3
    @email
  )
  webPageElementInput
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-password\"]"
    100
    3
    @pwd
  )
  webPageElementClick
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-act\"]"
    100
    3
    0
    1
  )
  sleep
  (
    12
    0
    0
  )
  assign
  (
    @db
    dbSqlConn
    (
      "com.mysql.jdbc.Driver"
      str
      (
        "jdbc:mysql://"
        "rideprod.c9y2b7qgnkr8.us-east-2.rds.amazonaws.com"
        ":"
        3306
      )
      "dev_user"
      "0TAnwLmMzDbCYMuf"
    )
  )
  tableStream
  ^ 修改账号内订单状态为Accepted
  (
    streamDbSql
    (
      @db
      "update ride.dispatch set stat = '134217730',trip_no_x = trip_no where to_fleet_id = '12774' and stat != '134217736';"
    )
  )
  tableStream
  ^ 删除订单no show记录
  (
    streamDbSql
    (
      @db
      "delete from ride.complaint where ride_id in (select ride_id from ride.dispatch where to_fleet_id = '12774');"
    )
  )
  tableStream
  ^ 删除订单note_ride记录
  (
    streamDbSql
    (
      @db
      "delete from ride.note_ride where ride_id in (136186,136007,136008) and note_type = 136118281;"
    )
  )
  webPageElementClick
  ^ 点击关闭通知权限弹框
  (
    @chr
    "xpath"
    "//*[@id=\"fcm-notify-denied-msg\"]//*[@id=\"confirm-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击关闭版本更新弹框
  (
    @chr
    "xpath"
    "//*[@id=\"container-fluid\"]//*[@id=\"version_modal\"]//*[@id=\"close-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击关闭公告弹框
  (
    @chr
    "xpath"
    "//*[@id=\"container-fluid\"]//*[@id=\"announcement_modal\"]//*[@id=\"close-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击Booked
  (
    @chr
    "xpath"
    "//*[@id=\"index_rides_mgmt\"]//*[@id=\"orders-booked-act\"]"
    100
    3
    0
    1
  )
  sleep
  (
    3
    0
    0
  )
  assign
  (
    @CaseFile
    fileReadOpen
    (
      "/Users/liuliuxuan/Documents/elifeautotest/api_test_case/more.csv"
    )
  )
  loopStream
  (
    @row
    streamFileCsv
    (
      @CaseFile
    )
    assign
    (
      @CaseTitle
      sel
      (
        @row
        0
      )
    )
    assign
    (
      @ride1
      sel
      (
        @row
        1
      )
    )
    assign
    (
      @ride2
      sel
      (
        @row
        2
      )
    )
    assign
    (
      @ride3
      sel
      (
        @row
        3
      )
    )
    assign
    (
      @assert1
      sel
      (
        @row
        4
      )
    )
    assign
    (
      @assert2
      sel
      (
        @row
        5
      )
    )
    assign
    (
      @assert3
      sel
      (
        @row
        6
      )
    )
    assign
    (
      @assert4
      sel
      (
        @row
        7
      )
    )
    assign
    (
      @assert5
      sel
      (
        @row
        8
      )
    )
    webPageElementInput
    ^ 输入订单号回车搜索 ---------  正常订单流程
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"ride-id-search-fld\"]"
      100
      3
      str
      (
        @ride1
        "
"
      )
    )
    sleep
    (
      3
      0
      0
    )
    webPageElementClick
    ^ 查看第一笔订单详情
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list\"]/div[2]//*[@id=\"rides-list-row-0\"]/div/div[2]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    assign
    ^ 获取more按钮状态json
    (
      @MoreJson
      webElementInfo
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
      )
    )
    assign
    ^ 获取more按钮状态值
    (
      @MoreDisplayed
      sel
      (
        @MoreJson
        'displayed'
      )
    )
    if
    ^ more按钮状态true
    (
      assign
      (
        @MoreDisplayed
        sel
        (
          @MoreJson
          'displayed'
        )
      )
      webPageElementClick
      ^ 点击more按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
        0
        1
      )
      sleep
      (
        1
        0
        0
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态json
      (
        @TripJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态值
      (
        @TripDisplayed
        sel
        (
          @TripJson
          'displayed'
        )
      )
      assign
      ^ 获取more按钮中Unable to provide service按钮状态json
      (
        @DriverNoShowJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"driver-no-show\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Unable to provide service按钮状态值
      (
        @DriverDisplayed
        sel
        (
          @DriverNoShowJson
          'displayed'
        )
      )
      if
      ^ Book return trip按钮状态为true
      (
        assign
        (
          @TripDisplayed
          sel
          (
            @TripJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Book return trip
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
          0
          1
        )
        sleep
        (
          5
          0
          0
        )
        assign
        ^ 获取Book return trip页面title json
        (
          @TripTitleJson
          webElementInfo
          (
            @chr
            "xpath"
            "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-top-title\"]"
            100
            3
          )
        )
        assign
        ^ 获取Book return trip页面title 状态
        (
          @TripTitleDisplayed
          sel
          (
            @TripTitleJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Book return trip页面左上角返回按钮
        (
          @chr
          "xpath"
          "//*[@id=\"create_return_trip\"]//*[@id=\"tab-back\"]"
          100
          3
          0
          1
        )
        sleep
        (
          1
          0
          0
        )
        webPageElementClick
        ^ 点击more按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
          100
          3
          0
          1
        )
        sleep
        (
          1
          0
          0
        )
      )
      else
      (
        assign
        (
          @TripTitleDisplayed
          valueOf
          (
            "false"
          )
        )
      )
      if
      ^ Unable to provide service按钮状态为true
      (
        assign
        (
          @DriverDisplayed
          sel
          (
            @DriverNoShowJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Unable to provide service按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"driver-no-show\"]"
          100
          3
          0
          1
        )
        sleep
        (
          2
          0
          0
        )
        webPageElementClick
        ^ 点击Mechanical breakdown选项
        (
          @chr
          "xpath"
          "//*[@id=\"driver_no_show_reason_modal\"]/div//*[@id=\"driver-no-show-reason-checkbox-0\"]"
          100
          3
          0
          1
        )
        webPageElementClick
        ^ 点击No picture,Done按钮
        (
          @chr
          "xpath"
          "//*[@id=\"driver_no_show_reason_modal\"]//*[@id=\"done-btn\"]"
          100
          3
          0
          1
        )
        sleep
        (
          12
          0
          0
        )
      )
      assign
      (
        @GetAssert1
        valueOf
        (
          str
          (
            "Accept more:true,Book return trip:"
            @TripDisplayed
            ",Unable to provide service:"
            @DriverDisplayed
            ",TripTitle:"
            @TripTitleDisplayed
          )
        )
      )
    )
    else
    ^ more按钮状态false
    (
      assign
      (
        @GetAssert1
        valueOf
        (
          "Accept more:false,Book return trip:false,Unable to provide service:false,TripTitle:false"
        )
      )
    )
    if
    ^ 断言 Accetped 状态下more按钮显示
    (
      equal
      (
        @assert1
        @GetAssert1
      )
      print
      (
        str
        (
          "PASS "
          @CaseTitle
          " "
          @ride1
          " "
          @assert1
          " == "
          @GetAssert1
        )
      )
    )
    else
    (
      print
      (
        str
        (
          "FALSE "
          @CaseTitle
          " "
          @ride1
          " "
          @assert1
          " != "
          @GetAssert1
        )
      )
    )
    webPageElementClick
    ^ 点击详情页左上角返回按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-back\"]"
      100
      3
      0
      1
    )
    sleep
    (
      2
      0
      0
    )
    webPageElementInput
    ^ 输入订单号回车搜索
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"ride-id-search-fld\"]"
      100
      3
      str
      (
        @ride2
        "
"
      )
    )
    sleep
    (
      5
      0
      0
    )
    webPageElementClick
    ^ 查看第一笔订单详情
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list\"]/div[2]//*[@id=\"rides-list-row-0\"]/div/div[2]"
      100
      3
      0
      1
    )
    sleep
    (
      2
      0
      0
    )
    webPageElementClick
    ^ 点击On my way按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"on-my-way\"]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    webPageElementClick
    ^ 点击YES按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"start-track-modal\"]//*[@id=\"confirm-start\"]"
      100
      3
      0
      1
    )
    sleep
    (
      5
      0
      0
    )
    webPageElementClick
    ^ 点击more按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
      100
      3
      0
      1
    )
    webPageElementClick
    ^ 点击Leave message按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-feedback-entry\"]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    webPageElementClick
    ^ 点击关闭弹框
    (
      @chr
      "xpath"
      "//*[@id=\"other_feedback_modal\"]/div/div[1]"
      100
      3
      0
      1
    )
    webPageElementClick
    ^ 点击On location按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"on-location\"]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    assign
    ^ 获取more按钮状态json
    (
      @MoreJson
      webElementInfo
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
      )
    )
    assign
    ^ 获取more按钮状态值
    (
      @MoreDisplayed
      sel
      (
        @MoreJson
        'displayed'
      )
    )
    if
    ^ more按钮状态true
    (
      assign
      (
        @MoreDisplayed
        sel
        (
          @MoreJson
          'displayed'
        )
      )
      webPageElementClick
      ^ 点击more按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
        0
        1
      )
      sleep
      (
        1
        0
        0
      )
      assign
      ^ 获取more按钮中Customer on show按钮状态json
      (
        @NoShowJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-no-show\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Customer on show按钮状态值
      (
        @NoShowDisplayed
        sel
        (
          @NoShowJson
          'displayed'
        )
      )
      if
      ^ Customer on show按钮状态为true
      (
        assign
        (
          @NoShowDisplayed
          sel
          (
            @NoShowJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Customer on show按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-no-show\"]"
          100
          3
          0
          1
        )
        sleep
        (
          5
          0
          0
        )
        webPageElementInput
        ^ 输入Notes
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"no-show-confirmation-notes\"]"
          100
          3
          "Test Customer on show"
        )
        webPageElementClick
        ^ 点击Confirm按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"no-show-confirmation-confirm-btn\"]"
          100
          3
          0
          1
        )
        sleep
        (
          6
          0
          0
        )
        assign
        ^ 获取Customer on show页面title json
        (
          @NoShowTitleJson
          webElementInfo
          (
            @chr
            "xpath"
            "//*[@id=\"dispatch_detail\"]//*[@id=\"upload-img-title\"]"
            100
            3
          )
        )
        assign
        ^ 获取Customer on show页面title 状态
        (
          @NoShowTitleDisplayed
          sel
          (
            @NoShowTitleJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Finish按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"no-show-evidence-upload-finish-btn\"]"
          100
          3
          0
          1
        )
        sleep
        (
          2
          0
          0
        )
        webPageElementClick
        ^ 点击Close按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"incomp-img-warn-modal-confirm-btn\"]"
          100
          3
          0
          1
        )
        sleep
        (
          8
          0
          0
        )
      )
      else
      (
        assign
        (
          @NoShowTitleDisplayed
          valueOf
          (
            "false"
          )
        )
      )
      webPageElementClick
      ^ 点击more按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
        0
        1
      )
      sleep
      (
        2
        0
        0
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态json
      (
        @TripJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态值
      (
        @TripDisplayed
        sel
        (
          @TripJson
          'displayed'
        )
      )
      webPageElementClick
      ^ 点击Leave message
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-feedback-entry\"]"
        100
        3
        0
        1
      )
      webPageElementClick
      ^ 点击Customer no show按钮
      (
        @chr
        "xpath"
        "//*[@id=\"cust-feedback-type-list-wrapper\"]//*[@id=\"no-show-fedbk-entry\"]"
        100
        3
        0
        1
      )
      sleep
      (
        3
        0
        0
      )
      webPageElementClick
      ^ 点击关闭Customer no show弹框
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"no-show-confirmation-cancel-btn\"]"
        100
        3
        0
        1
      )
      sleep
      (
        2
        0
        0
      )
      assign
      (
        @GetAssert2
        valueOf
        (
          str
          (
            "Customer no show more:true,Book return trip:"
            @TripDisplayed
            ",Customer no show:"
            @NoShowDisplayed
            ",NoShowTitle:"
            @NoShowTitleDisplayed
          )
        )
      )
    )
    else
    (
      assign
      (
        @GetAssert2
        valueOf
        (
          "Customer no show more:false,Book return trip:false,Customer no show:false,NoShowTitle:false"
        )
      )
    )
    if
    ^ 断言 Customer no show more按钮显示
    (
      equal
      (
        @assert2
        @GetAssert2
      )
      print
      (
        str
        (
          "PASS "
          @CaseTitle
          " "
          @ride2
          " "
          @assert2
          " == "
          @GetAssert2
        )
      )
    )
    else
    (
      print
      (
        str
        (
          "FALSE "
          @CaseTitle
          " "
          @ride2
          " "
          @assert2
          " != "
          @GetAssert2
        )
      )
    )
    webPageElementClick
    ^ 点击详情页左上角返回按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-back\"]"
      100
      3
      0
      1
    )
    sleep
    (
      2
      0
      0
    )
    webPageElementInput
    ^ 输入订单号回车搜索
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"ride-id-search-fld\"]"
      100
      3
      str
      (
        @ride3
        "
"
      )
    )
    sleep
    (
      5
      0
      0
    )
    webPageElementClick
    ^ 查看第一笔订单详情
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list\"]/div[2]//*[@id=\"rides-list-row-0\"]/div/div[2]"
      100
      3
      0
      1
    )
    sleep
    (
      2
      0
      0
    )
    webPageElementClick
    ^ 点击On my way按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"on-my-way\"]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    webPageElementClick
    ^ 点击YES按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"start-track-modal\"]//*[@id=\"confirm-start\"]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    webPageElementClick
    ^ 点击On location按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"on-location\"]"
      100
      3
      0
      1
    )
    sleep
    (
      2
      0
      0
    )
    webPageElementClick
    ^ 点击On board按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"on-board\"]"
      100
      3
      0
      1
    )
    webPageElementClick
    ^ 点击more按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
      100
      3
      0
      1
    )
    webPageElementClick
    ^ 点击Drop off按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"drop-off\"]"
      100
      3
      0
      1
    )
    sleep
    (
      2
      0
      0
    )
    assign
    ^ 获取more按钮状态json
    (
      @MoreJson
      webElementInfo
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
      )
    )
    assign
    ^ 获取more按钮状态值
    (
      @MoreDisplayed
      sel
      (
        @MoreJson
        'displayed'
      )
    )
    if
    ^ more按钮状态true
    (
      assign
      (
        @MoreDisplayed
        sel
        (
          @MoreJson
          'displayed'
        )
      )
      webPageElementClick
      ^ 点击more按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
        0
        1
      )
      sleep
      (
        1
        0
        0
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态json
      (
        @TripJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态值
      (
        @TripDisplayed
        sel
        (
          @TripJson
          'displayed'
        )
      )
      assign
      ^ 获取more按钮中Leave message按钮状态json
      (
        @LeaveJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-feedback-entry\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Leave message按钮状态值
      (
        @LeaveDisplayed
        sel
        (
          @LeaveJson
          'displayed'
        )
      )
      if
      ^ Book return trip按钮状态为true
      (
        assign
        (
          @TripDisplayed
          sel
          (
            @TripJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Book return trip
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
          0
          1
        )
        sleep
        (
          5
          0
          0
        )
        assign
        ^ 获取Book return trip页面title json
        (
          @TripTitleJson
          webElementInfo
          (
            @chr
            "xpath"
            "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-top-title\"]"
            100
            3
          )
        )
        assign
        ^ 获取Book return trip页面title 状态
        (
          @TripTitleDisplayed
          sel
          (
            @TripTitleJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Book return trip页面左上角返回按钮
        (
          @chr
          "xpath"
          "//*[@id=\"create_return_trip\"]//*[@id=\"tab-back\"]"
          100
          3
          0
          1
        )
        sleep
        (
          1
          0
          0
        )
        webPageElementClick
        ^ 点击more按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
          100
          3
          0
          1
        )
        sleep
        (
          1
          0
          0
        )
      )
      else
      (
        assign
        (
          @TripTitleDisplayed
          valueOf
          (
            "false"
          )
        )
      )
      webPageElementClick
      ^ 点击Leave message按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-feedback-entry\"]"
        100
        3
        0
        1
      )
      sleep
      (
        3
        0
        0
      )
      webPageElementClick
      ^ 点击关闭弹框
      (
        @chr
        "xpath"
        "//*[@id=\"other_feedback_modal\"]/div/div[1]"
        100
        3
        0
        1
      )
      assign
      (
        @GetAssert3
        valueOf
        (
          str
          (
            "At destination more:true,Book return trip:"
            @TripDisplayed
            ",Leave message:"
            @LeaveDisplayed
            ",TripTitle:"
            @TripTitleDisplayed
          )
        )
      )
    )
    else
    (
      assign
      (
        @GetAssert3
        valueOf
        (
          "At destination more:false,Book return trip:false,Leave message:false,TripTitle:false"
        )
      )
    )
    if
    ^ 断言 At destination more按钮显示
    (
      equal
      (
        @assert3
        @GetAssert3
      )
      print
      (
        str
        (
          "PASS "
          @CaseTitle
          " "
          @ride3
          " "
          @assert3
          " == "
          @GetAssert3
        )
      )
    )
    else
    (
      print
      (
        str
        (
          "FALSE "
          @CaseTitle
          " "
          @ride3
          " "
          @assert3
          " != "
          @GetAssert3
        )
      )
    )
    webPageElementClick
    ^ 点击详情页左上角返回按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-back\"]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    webPageElementClick
    ^ 点击Finished Rides------past list
    (
      @chr
      "xpath"
      "//*[@id=\"container-fluid\"]//*[@id=\"finished-orders-entry\"]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    webPageElementInput
    ^ 输入订单号回车搜索
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"ride-id-search-fld\"]"
      100
      3
      str
      (
        @ride1
        "
"
      )
    )
    sleep
    (
      3
      0
      0
    )
    assign
    (
      @rideStat1
      webElementValue
      ^ 获取订单状态
      (
        @chr
        "xpath"
        "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list-past-row-0\"]/div/div[1]/div[2]"
        100
        3
        "innerHTML"
      )
    )
    webPageElementInput
    ^ 输入订单号回车搜索
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"ride-id-search-fld\"]"
      100
      3
      str
      (
        @ride2
        "
"
      )
    )
    sleep
    (
      3
      0
      0
    )
    assign
    (
      @rideStat2
      webElementValue
      ^ 获取订单状态
      (
        @chr
        "xpath"
        "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list-past-row-0\"]/div/div[1]/div[2]"
        100
        3
        "innerHTML"
      )
    )
    webPageElementClick
    ^ 点击查看第一笔订单详情
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list-past-row-0\"]/div/div[2]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    assign
    ^ 获取more按钮状态json
    (
      @MoreJson
      webElementInfo
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
      )
    )
    assign
    ^ 获取more按钮状态值
    (
      @MoreDisplayed
      sel
      (
        @MoreJson
        'displayed'
      )
    )
    if
    ^ more按钮状态true
    (
      assign
      (
        @MoreDisplayed
        sel
        (
          @MoreJson
          'displayed'
        )
      )
      webPageElementClick
      ^ 点击more按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
        0
        1
      )
      sleep
      (
        1
        0
        0
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态json
      (
        @TripJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态值
      (
        @TripDisplayed
        sel
        (
          @TripJson
          'displayed'
        )
      )
      webPageElementClick
      ^ 点击Leave message
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-feedback-entry\"]"
        100
        3
        0
        1
      )
      assign
      ^ 获取Leave message按钮中Customer on show按钮状态json
      (
        @NoShowJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"cust-feedback-type-list-wrapper\"]//*[@id=\"no-show-fedbk-entry\"]"
          100
          3
        )
      )
      assign
      ^ 获取Leave message按钮中Customer on show按钮状态值
      (
        @NoShowDisplayed
        sel
        (
          @NoShowJson
          'displayed'
        )
      )
      if
      ^ Customer on show按钮状态为true
      (
        assign
        (
          @NoShowDisplayed
          sel
          (
            @NoShowJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Customer on show按钮
        (
          @chr
          "xpath"
          "//*[@id=\"cust-feedback-type-list-wrapper\"]//*[@id=\"no-show-fedbk-entry\"]"
          100
          3
          0
          1
        )
        sleep
        (
          5
          0
          0
        )
        webPageElementInput
        ^ 输入Notes
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"no-show-confirmation-notes\"]"
          100
          3
          "Test Customer on show"
        )
        webPageElementClick
        ^ 点击Confirm按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"no-show-confirmation-confirm-btn\"]"
          100
          3
          0
          1
        )
        sleep
        (
          12
          0
          0
        )
        assign
        ^ 获取Customer on show页面title json
        (
          @NoShowTitleJson
          webElementInfo
          (
            @chr
            "xpath"
            "//*[@id=\"dispatch_detail\"]//*[@id=\"upload-img-title\"]"
            100
            3
          )
        )
        assign
        ^ 获取Customer on show页面title 状态
        (
          @NoShowTitleDisplayed
          sel
          (
            @NoShowTitleJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Finish按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"no-show-evidence-upload-finish-btn\"]"
          100
          3
          0
          1
        )
        sleep
        (
          2
          0
          0
        )
        webPageElementClick
        ^ 点击Close按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"incomp-img-warn-modal-confirm-btn\"]"
          100
          3
          0
          1
        )
        sleep
        (
          8
          0
          0
        )
      )
      else
      (
        assign
        (
          @NoShowTitleDisplayed
          valueOf
          (
            "false"
          )
        )
      )
      assign
      (
        @GetAssert4
        valueOf
        (
          str
          (
            "Past Customer no show more:true,Book return trip:"
            @TripDisplayed
            ",Customer no show:"
            @NoShowDisplayed
            ",NoShowTitle:"
            @NoShowTitleDisplayed
          )
        )
      )
    )
    else
    (
      assign
      (
        @GetAssert4
        valueOf
        (
          "Past Customer no show more:false,Book return trip:false,Customer no show:false,NoShowTitle:false"
        )
      )
    )
    if
    ^ 断言 Past Customer no show more按钮显示
    (
      equal
      (
        @assert4
        @GetAssert4
      )
      print
      (
        str
        (
          "PASS "
          @CaseTitle
          " "
          @ride2
          " "
          @assert4
          " == "
          @GetAssert4
        )
      )
    )
    else
    (
      print
      (
        str
        (
          "FALSE "
          @CaseTitle
          " "
          @ride2
          " "
          @assert4
          " != "
          @GetAssert4
        )
      )
    )
    webPageElementClick
    ^ 点击详情页左上角返回按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-back\"]"
      100
      3
      0
      1
    )
    webPageElementInput
    ^ 输入订单号回车搜索
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"ride-id-search-fld\"]"
      100
      3
      str
      (
        @ride3
        "
"
      )
    )
    sleep
    (
      3
      0
      0
    )
    assign
    (
      @rideStat3
      webElementValue
      ^ 获取订单号
      (
        @chr
        "xpath"
        "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list-past-row-0\"]/div/div[1]/div[2]"
        100
        3
        "innerHTML"
      )
    )
    webPageElementClick
    ^ 点击查看第一笔订单详情
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"rides-list-past-row-0\"]/div/div[2]"
      100
      3
      0
      1
    )
    sleep
    (
      3
      0
      0
    )
    assign
    ^ 获取more按钮状态json
    (
      @MoreJson
      webElementInfo
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
      )
    )
    assign
    ^ 获取more按钮状态值
    (
      @MoreDisplayed
      sel
      (
        @MoreJson
        'displayed'
      )
    )
    if
    ^ more按钮状态true
    (
      assign
      (
        @MoreDisplayed
        sel
        (
          @MoreJson
          'displayed'
        )
      )
      webPageElementClick
      ^ 点击more按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
        100
        3
        0
        1
      )
      sleep
      (
        1
        0
        0
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态json
      (
        @TripJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Book return trip按钮状态值
      (
        @TripDisplayed
        sel
        (
          @TripJson
          'displayed'
        )
      )
      assign
      ^ 获取more按钮中Leave message按钮状态json
      (
        @LeaveJson
        webElementInfo
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-feedback-entry\"]"
          100
          3
        )
      )
      assign
      ^ 获取more按钮中Leave message按钮状态值
      (
        @LeaveDisplayed
        sel
        (
          @LeaveJson
          'displayed'
        )
      )
      if
      ^ Book return trip按钮状态为true
      (
        assign
        (
          @TripDisplayed
          sel
          (
            @TripJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Book return trip
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"book-return-trip_more\"]"
          100
          3
          0
          1
        )
        sleep
        (
          5
          0
          0
        )
        assign
        ^ 获取Book return trip页面title json
        (
          @TripTitleJson
          webElementInfo
          (
            @chr
            "xpath"
            "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-top-title\"]"
            100
            3
          )
        )
        assign
        ^ 获取Book return trip页面title 状态
        (
          @TripTitleDisplayed
          sel
          (
            @TripTitleJson
            'displayed'
          )
        )
        webPageElementClick
        ^ 点击Book return trip页面左上角返回按钮
        (
          @chr
          "xpath"
          "//*[@id=\"create_return_trip\"]//*[@id=\"tab-back\"]"
          100
          3
          0
          1
        )
        sleep
        (
          1
          0
          0
        )
        webPageElementClick
        ^ 点击more按钮
        (
          @chr
          "xpath"
          "//*[@id=\"dispatch_detail\"]//*[@id=\"more-act\"]"
          100
          3
          0
          1
        )
        sleep
        (
          1
          0
          0
        )
      )
      else
      (
        assign
        (
          @TripTitleDisplayed
          valueOf
          (
            "false"
          )
        )
      )
      webPageElementClick
      ^ 点击Leave message按钮
      (
        @chr
        "xpath"
        "//*[@id=\"dispatch_detail\"]//*[@id=\"customer-feedback-entry\"]"
        100
        3
        0
        1
      )
      sleep
      (
        3
        0
        0
      )
      webPageElementClick
      ^ 点击关闭弹框
      (
        @chr
        "xpath"
        "//*[@id=\"other_feedback_modal\"]/div/div[1]"
        100
        3
        0
        1
      )
      assign
      (
        @GetAssert5
        valueOf
        (
          str
          (
            "Past At destination more:true,Book return trip:"
            @TripDisplayed
            ",Leave message:"
            @LeaveDisplayed
            ",TripTitle:"
            @TripTitleDisplayed
          )
        )
      )
    )
    else
    (
      assign
      (
        @GetAssert5
        valueOf
        (
          "Past At destination more:false,Book return trip:false,Leave message:false,TripTitle:false"
        )
      )
    )
    if
    ^ 断言 Past At destination more按钮显示
    (
      equal
      (
        @assert5
        @GetAssert5
      )
      print
      (
        str
        (
          "PASS "
          @CaseTitle
          " "
          @ride3
          " "
          @assert5
          " == "
          @GetAssert5
        )
      )
    )
    else
    (
      print
      (
        str
        (
          "FALSE "
          @CaseTitle
          " "
          @ride3
          " "
          @assert5
          " != "
          @GetAssert5
        )
      )
    )
    webPageElementClick
    ^ 点击详情页左上角返回按钮
    (
      @chr
      "xpath"
      "//*[@id=\"dispatch_detail\"]//*[@id=\"detail-back\"]"
      100
      3
      0
      1
    )
    assign
    (
      @rideStatList
      valueOf
      (
        str
        (
          @rideStat1
          ","
          @rideStat2
          ","
          @rideStat3
        )
      )
    )
    if
    (
      equal
      (
        @rideStatList
        "Unable to provide service,Customer no show,At destination"
      )
      print
      (
        str
        (
          "PASS "
          @CaseTitle
          @ride1
          ", "
          @ride2
          ", "
          @ride3
          ", "
          @rideStatList
          "==Unable to provide service,Customer no show,At destination"
        )
      )
    )
    else
    (
      print
      (
        str
        (
          "FALSE "
          @CaseTitle
          @ride1
          ", "
          @ride2
          ", "
          @ride3
          ", "
          @rideStatList
          "!=Unable to provide service,Customer no show,At destination"
        )
      )
    )
    pause
    (
    )
    webPageElementClick
    ^ 返回booked list
    (
      @chr
      "xpath"
      "//*[@id=\"container-fluid\"]//*[@id=\"finished-rides-esc-act\"]"
      100
      3
      0
      1
    )
    sleep
    (
      2
      0
      0
    )
  )
)
