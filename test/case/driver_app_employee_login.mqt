sequence
(
  args
  (
    keyValue
    (
      "@email"
      "riotestaa@qq.com"
    )
    keyValue
    (
      "@wrongemail"
      "riotesttestaa@qq.com"
    )
    keyValue
    (
      "@password"
      "a123456"
    )
    keyValue
    (
      "@wrongpwd"
      "qweasdzxc"
    )
    keyValue
    (
      "@employee"
      "?employee=riotest"
    )
    keyValue
    (
      "@wrongemployee"
      "?employee=riotesttest"
    )
    keyValue
    (
      "@path"
      "https://elifetransfer.s3.us-east-2.amazonaws.com/dev/Driver_app/driver_app.html"
    )
    keyValue
    (
      "@loginnote"
      "riotest logined via riotestaa@qq"
    )
    keyValue
    (
      "@acctitle"
      "Sorry, you have no permission to access account"
    )
    keyValue
    (
      "@signtitle2"
      "Welcome to Elife!"
    )
    keyValue
    (
      "@testtitle"
      "Finished Rides"
    )
  )
  print
  ^ 测试标题：员工登录，测试点：登录日志，account信息屏蔽
  (
    "TEST:  Employee Sign"
  )
  assign
  (
    @chr
    webBrowser
    (
      "Chrome"
    )
  )
  webBrowserPage
  ^ 打开chr, 登录错误员工账号+正确车队账号+正确密码登录失败
  (
    @chr
    str
    (
      @path
      @wrongemployee
    )
  )
  webPageElementInput
  ^ 输入正确车队账号
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-email\"]"
    100
    3
    @email
  )
  webPageElementInput
  ^ 输入正确密码
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-password\"]"
    100
    3
    @password
  )
  webPageElementClick
  ^ 点击登录，登录失败提示"Incorrect account or password"
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-act\"]"
    100
    3
    0
    1
  )
  sleep
  (
    5
    0
    0
  )
  webBrowserPage
  ^ 打开chr, 登录正确员工账号+正确车队账号+正确密码登录失败
  (
    @chr
    str
    (
      @path
      @employee
    )
  )
  webPageElementInput
  ^ 输入错误车队账号
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-email\"]"
    100
    3
    @wrongemail
  )
  webPageElementInput
  ^ 输入正确密码
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-password\"]"
    100
    3
    @password
  )
  webPageElementClick
  ^ 查看密码
  (
    @chr
    "xpath"
    "//*[@id=\"eye-icon\"]"
    100
    3
    0
    1
  )
  sleep
  (
    2
    0
    0
  )
  webPageElementClick
  ^ 点击登录，登录失败提示"Incorrect account or password"
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-act\"]"
    100
    3
    0
    1
  )
  sleep
  (
    5
    0
    0
  )
  webPageElementInput
  ^ 输入正确车队账号
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-email\"]"
    100
    3
    @email
  )
  webPageElementInput
  ^ 输入错误密码
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-password\"]"
    100
    3
    @wrongpwd
  )
  webPageElementClick
  ^ 点击登录，登录失败提示"Incorrect account or password"
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-act\"]"
    100
    3
    0
    1
  )
  sleep
  (
    5
    0
    0
  )
  webPageElementInput
  ^ 输入正确密码
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-password\"]"
    100
    3
    @password
  )
  webPageElementClick
  ^ 点击登录，登录成功
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-act\"]"
    100
    3
    0
    1
  )
  assign
  (
    @new
    dateTimeNow
    (
    )
  )
  assign
  (
    @time
    dateTimeFormat
    (
      @new
      "yyyy-MM-dd HH:mm:ee"
    )
  )
  assign
  (
    @db
    dbSqlConn
    ^ 连接数据库
    (
      "com.mysql.jdbc.Driver"
      str
      (
        "jdbc:mysql://"
        "rideprod.c9y2b7qgnkr8.us-east-2.rds.amazonaws.com"
        ":"
        3306
      )
      "dev_user"
      "0TAnwLmMzDbCYMuf"
    )
  )
  tableStream
  (
    streamDbSql
    (
      @db
      "use ride"
    )
  )
  sleep
  (
    10
    0
    0
  )
  assign
  (
    @logs
    tableStream
    (
      streamDbSql
      (
        @db
        "select notes,inserted_at from note_fleet order by id desc limit 1"
      )
    )
  )
  assign
  (
    @notes
    selInPlace
    (
      @logs
      0
      0
    )
  )
  assign
  (
    @notestime
    selInPlace
    (
      @logs
      0
      1
    )
  )
  assign
  (
    @iftime1
    strSub
    ^ 提取当前时间年月日小时分钟
    (
      @time
      0
      16
    )
  )
  assign
  (
    @iftime2
    strSub
    ^ 提取日志创建时间年月日小时分钟
    (
      str
      (
        @notestime
      )
      0
      16
    )
  )
  if
  ^ 判断员工登录日志创建时间
  (
    equal
    (
      @iftime1
      @iftime2
    )
    print
    (
      str
      (
        "1.   PASS   "
        @iftime1
        " ==  "
        @iftime2
      )
    )
  )
  else
  (
    print
    (
      str
      (
        "1.  PASS   "
        @iftime1
        "!="
        @iftime2
        "    "
        @time
        "   "
        @notestime
      )
    )
  )
  if
  ^ 判断员工登录日志信息
  (
    equal
    (
      @notes
      @loginnote
    )
    print
    (
      str
      (
        "2.   PASS   "
        @notes
        " ==  "
        @loginnote
      )
    )
  )
  else
  (
    print
    (
      str
      (
        "2.  FALSE   "
        @notes
        "!="
        @loginnote
      )
    )
  )
  sleep
  (
    10
    0
    0
  )
  webPageElementClick
  (
    @chr
    "xpath"
    "//*[@id=\"fcm-notify-denied-msg\"]//*[@id=\"confirm-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  (
    @chr
    "xpath"
    "//*[@id=\"container-fluid\"]//*[@id=\"version_modal\"]//*[@id=\"close-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  (
    @chr
    "xpath"
    "//*[@id=\"container-fluid\"]//*[@id=\"announcement_modal\"]//*[@id=\"close-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击左上角切换菜单
  (
    @chr
    "xpath"
    "//*[@id=\"menu-toggle\"]"
    100
    3
    0
    1
  )
  sleep
  (
    2
    0
    0
  )
  webPageElementClick
  ^ 点击account，检查车队账户信息是否屏蔽
  (
    @chr
    "xpath"
    "//*[@id=\"account-mgmt-btn\"]"
    100
    3
    0
    1
  )
  sleep
  (
    3
    0
    0
  )
  assign
  (
    @hintinfo
    webElementValue
    ^ 获取无权限提示信息
    (
      @chr
      "xpath"
      "//*[@id=\"employee-no-permission\"]"
      100
      3
      "innerHTML"
    )
  )
  assign
  (
    @accname
    webElementValue
    ^ 获取账号名称标题
    (
      @chr
      "xpath"
      "//*[@id=\"account_name\"]//*[@id=\"lbl-\"]"
      100
      3
      "innerHTML"
    )
  )
  assign
  (
    @finish
    webPageElements
    ^ 获取finish按钮元素
    (
      @chr
      "xpath"
      "//*[@id=\"account-form-btn\"]"
      100
      3
    )
  )
  if
  ^ 判断页面无权限提示，以及账号信息按钮是否屏蔽
  (
    equal
    (
      @acctitle
      str
      (
        @hintinfo
        @accname
      )
    )
    print
    (
      str
      (
        "3.  PASS   "
        @acctitle
        "=="
        @hintinfo
        @accname
      )
    )
  )
  else
  (
    print
    (
      str
      (
        "3.   FALSE   "
        @acctitle
        "!="
        @hintinfo
        @accname
      )
    )
  )
  webPageElementClick
  ^ 点击左上角导航键
  (
    @chr
    "xpath"
    "//*[@id=\"menu-toggle\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击设置
  (
    @chr
    "xpath"
    "//*[@id=\"setting-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击退出登录
  (
    @chr
    "xpath"
    "//*[@id=\"sign-out\"]"
    100
    3
    0
    1
  )
  sleep
  (
    3
    0
    0
  )
  webPageElementInput
  ^ 输入账号
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-email\"]"
    100
    3
    "riotestee@qq.com"
  )
  webPageElementInput
  ^ 输入密码
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-password\"]"
    100
    3
    @password
  )
  webPageElementClick
  ^ 点击登录
  (
    @chr
    "xpath"
    "//*[@id=\"sign-in-act\"]"
    100
    3
    0
    1
  )
  sleep
  (
    15
    0
    0
  )
  webPageElementClick
  (
    @chr
    "xpath"
    "//*[@id=\"fcm-notify-denied-msg\"]//*[@id=\"confirm-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  (
    @chr
    "xpath"
    "//*[@id=\"container-fluid\"]//*[@id=\"version_modal\"]//*[@id=\"close-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  (
    @chr
    "xpath"
    "//*[@id=\"container-fluid\"]//*[@id=\"announcement_modal\"]//*[@id=\"close-btn\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击左上角导航按钮
  (
    @chr
    "xpath"
    "//*[@id=\"menu-toggle\"]"
    100
    3
    0
    1
  )
  webPageElementClick
  ^ 点击Account，查看车队账号是否屏蔽
  (
    @chr
    "xpath"
    "//*[@id=\"account-mgmt-btn\"]"
    100
    3
    0
    1
  )
  sleep
  (
    3
    0
    0
  )
  assign
  (
    @accname1
    webElementValue
    ^ 获取账号名称标题
    (
      @chr
      "xpath"
      "//*[@id=\"account_name\"]//*[@id=\"lbl-\"]"
      100
      3
      "innerHTML"
    )
  )
  assign
  (
    @finish1
    webElementValue
    ^ 获取Finish按钮是否屏蔽
    (
      @chr
      "xpath"
      "//*[@id=\"account-form-btn\"]"
      100
      3
      "innerHTML"
    )
  )
  assign
  (
    @hintinfo1
    webElementValue
    ^ 获取无权限提示信息
    (
      @chr
      "xpath"
      "//*[@id=\"employee-no-permission\"]"
      100
      3
      "innerHTML"
    )
  )
  if
  ^ 判断页面无权限提示，以及账号信息按钮是否屏蔽
  (
    equal
    (
      @acctitle
      str
      (
        @hintinfo1
        @accname1
      )
    )
    print
    (
      str
      (
        "4.  PASS   "
        @acctitle
        "=="
        @hintinfo1
        @accname1
      )
    )
  )
  else
  (
    print
    (
      str
      (
        "4.   FALSE   "
        @acctitle
        "!="
        @hintinfo1
        @accname1
      )
    )
  )
  webBrowserPage
  ^ 去掉员工账号刷新页面，查看是否退出到登录页面
  (
    @chr
    @path
  )
  sleep
  (
    5
    0
    0
  )
  webPageElementClick
  ^ 点击booked按钮
  (
    @chr
    "xpath"
    "//*[@id=\"orders-booked-act\"]"
    100
    3
    0
    1
  )
  sleep
  (
    6
    0
    0
  )
  webPageElementClick
  ^ 点击finished按钮,切换到past列表
  (
    @chr
    "xpath"
    "//*[@id=\"finished-statement\"]"
    100
    3
    0
    1
  )
  sleep
  (
    5
    0
    0
  )
  assign
  (
    @testtitle1
    webElementValue
    ^ 获取past 标题做断言
    (
      @chr
      "xpath"
      "//*[@id=\"index_rides_mgmt\"]//*[@id=\"finished-top-title\"]"
      100
      3
      "innerHTML"
    )
  )
  assign
  (
    @signtitle
    webElementValue
    ^ 获取登录页面标题
    (
      @chr
      "xpath"
      "//*[@id=\"welcome-sign\"]"
      100
      3
      "innerHTML"
    )
  )
  if
  ^ 判断去掉员工账号后刷新页面是否退出到登录界面
  (
    equal
    (
      @testtitle
      str
      (
        @testtitle1
      )
    )
    print
    (
      str
      (
        "5.  FALSE  "
        @testtitle
        "=="
        @testtitle1
      )
    )
  )
  else
  (
    print
    (
      str
      (
        "5.   PASS   "
        @testtitle
        "!="
        @testtitle1
      )
    )
  )
)
